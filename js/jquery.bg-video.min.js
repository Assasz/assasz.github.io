!function(e){function a(){return Math.floor(Date.now()/1e3)}e("html").addClass("js"),Date.now||(Date.now=function(){return(new Date).getTime()}),e.fn.bgVideo=function(t){var s=/iPad|iPhone|iPod/.test(navigator.platform)||/iPad|iPhone|iPod/.test(navigator.userAgent),i=e.extend({},e.fn.bgVideo.defaults,t);return this.each(function(){var t,o=e(this),n=o[0],u=o.attr("poster")||"",r=o.parent(),d=e('<button class="jquery-background-video-pauseplay pause"><span>Pause</span></button>'),p=e.extend({},i),f=o.data();e.each(f,function(e,a){0===e.indexOf("bgvideo")&&(e=(e=e.replace("bgvideo","")).charAt(0).toLowerCase()+e.slice(1),p[e]=a)}),o.on("playing",function(){null==t&&(t=a()),o.addClass("is-playing is-visible"),d.removeClass("play").addClass("pause").find("span").text("Pause"),e.fn.bgVideo.fitVideo(o)}),n.currentTime>0&&o.addClass("is-playing is-visible"),o.on("pause",function(){o.removeClass("is-playing"),d.removeClass("pause").addClass("play").find("span").text("Play"),p.fadeOnPause&&o.removeClass("is-visible")}),r.css({position:"relative",overflow:"hidden","background-size":"cover","background-position":"center center","background-repeat":"no-repeat","background-image":"url("+u+")"}),o.css({"min-width":"auto","min-height":"auto",width:"100%",height:"auto",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"}),p.fullScreen&&r.css({position:"fixed",top:"0",bottom:"0",left:"0",right:"0",height:"auto",margin:"0","z-index":"-1"}),o.css("transition-duration",p.fadeIn+"ms"),s&&(o.attr("src",""),o.find("source").attr("src",""),o.remove()),e.fn.bgVideo.fitVideo(o),e(window).resize(function(){e.fn.bgVideo.fitVideo(o)}),p.pauseAfter=parseInt(p.pauseAfter,10),p.pauseAfter>0&&o.on("timeupdate",function(){a()>t+p.pauseAfter&&(n.pause(),p.fadeOnEnd&&o.removeClass("is-visible"))}),p.showPausePlay&&!s&&(r.append(d),d.css({left:"auto",right:"auto",top:"auto",bottom:"auto"}),d.css(p.pausePlayXPos,p.pausePlayXOffset),d.css(p.pausePlayYPos,p.pausePlayYOffset),"center"===p.pausePlayXPos&&d.css({left:"50%","margin-left":"-10px"}),"center"===p.pausePlayYPos&&d.css({top:"50%","margin-top":"-10px"}),d.on("click",function(){n.paused?(n.play(),t=a()):n.pause()}))})},e.fn.bgVideo.defaults={fullScreen:!1,fadeIn:500,pauseAfter:120,fadeOnPause:!1,fadeOnEnd:!0,showPausePlay:!0,pausePlayXPos:"right",pausePlayYPos:"top",pausePlayXOffset:"15px",pausePlayYOffset:"15px"},e.fn.bgVideo.fitVideo=function(e){var a=e.parent(),t=a.outerHeight(),s=a.outerWidth();e.css({height:"auto",width:s+"px"}),t>e.height()&&e.css({height:t+"px",width:"auto"})},e(document).ready(function(){e("[data-bgvideo]").bgVideo()})}(jQuery);